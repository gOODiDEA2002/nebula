# Nebula Data Persistence 发展路线图

> 数据持久层模块未来规划

## 版本历史

### v2.0.0 (2024-Q4)
- ✅ 基于 MyBatis-Plus 3.5
- ✅ 读写分离支持
- ✅ 分库分表集成
- ✅ HikariCP连接池
- ✅ 自动填充元数据

### v2.0.1-SNAPSHOT (当前)
- ✅ 文档完善
- ✅ 性能优化
- ✅ Bug修复

## 近期计划

### v2.1.0 (2025-Q1)

**目标**: 增强数据库支持和性能

#### 1. 多数据库支持
- PostgreSQL支持
- Oracle支持
- SQL Server支持
- 达梦数据库支持(国产化)

#### 2. 动态数据源
```java
@Service
public class OrderService {
    @DynamicDataSource("tenant_${tenantId}")
    public Order getOrder(String orderNo) {
        return orderMapper.selectByOrderNo(orderNo);
    }
}
```

#### 3. 分片优化
- 自动分表创建
- 分片键推荐
- 分片规则热更新

### v2.2.0 (2025-Q2)

**目标**: 性能和可观测性

#### 1. SQL性能分析
- 慢SQL自动记录
- SQL执行计划分析
- 性能建议

#### 2. 数据归档
- 自动归档历史数据
- 归档数据查询
- 归档策略配置

#### 3. 数据库监控
- 连接池监控
- SQL性能监控
- 慢查询告警

## 中期规划

### v3.0.0 (2025-Q3)

**目标**: 云原生和分布式

#### 1. 分布式事务
- Seata集成
- 二阶段提交(2PC)
- TCC模式

#### 2. 读写分离增强
- 主从延迟检测
- 从库故障自动切换
- 读写分离策略扩展

#### 3. 弹性伸缩
- 自动扩缩容
- 连接池动态调整
- 负载均衡优化

## 长期展望

### v4.0.0 (2026+)

**愿景**: 智能化数据访问

#### 1. AI驱动优化
- 智能SQL优化
- 自动索引建议
- 查询性能预测

#### 2. NewSQL支持
- TiDB集成
- CockroachDB支持
- YugabyteDB支持

#### 3. 时序数据支持
- InfluxDB集成
- TimescaleDB支持
- 时序数据查询优化

## 技术债务

### 当前技术债务
- [ ] 补充PostgreSQL测试
- [ ] 优化分片算法性能
- [ ] 完善监控指标

### 计划解决
- v2.1.0: 多数据库测试
- v2.2.0: 性能优化
- v3.0.0: 监控完善

## 社区反馈

| 需求 | 优先级 | 状态 | 计划版本 |
|-----|-------|------|---------|
| PostgreSQL支持 | 高 | 规划中 | v2.1.0 |
| 动态数据源 | 高 | 规划中 | v2.1.0 |
| 分布式事务 | 中 | 规划中 | v3.0.0 |
| SQL性能分析 | 中 | 规划中 | v2.2.0 |

## 发布计划

| 版本 | 计划时间 | 主要内容 |
|-----|---------|---------|
| v2.1.0 | 2025-01 | 多数据库、动态数据源、分片优化 |
| v2.2.0 | 2025-04 | 性能分析、数据归档、监控 |
| v3.0.0 | 2025-07 | 分布式事务、弹性伸缩 |

---

**最后更新**: 2025-11-20  
**文档版本**: v1.0

